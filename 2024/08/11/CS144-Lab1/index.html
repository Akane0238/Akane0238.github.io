<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Standford CS144 Lab 1 | Tech_Islet</title><meta name="author" content="è˜‹æœ«é£"><meta name="copyright" content="è˜‹æœ«é£"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Lab 1 é¡¹ç›®æ„å»º  ç”±äºæˆ‘å¯¹gitä¸æ˜¯å¾ˆç†Ÿç»ƒï¼Œæ‰€ä»¥æ‹‰å–å’Œåˆå¹¶çš„æ“ä½œæœ‰ç‚¹éº»çƒ¦ã€‚é¦–å…ˆgit clone -b lab1-startercode &lt;url&gt;æ‹‰å–çš„æ˜¯åˆ«äººä»“åº“ lab1 çš„ start code åˆ°æœ¬åœ°ï¼Œç„¶ågit remote rm originåˆ é™¤ä¸è¿œç«¯ä»“åº“çš„è”ç³»ï¼Œgit remote add origin &lt;git@github.com:usrname&#x2F;rep">
<meta property="og:type" content="article">
<meta property="og:title" content="Standford CS144 Lab 1">
<meta property="og:url" content="http://example.com/2024/08/11/CS144-Lab1/index.html">
<meta property="og:site_name" content="Tech_Islet">
<meta property="og:description" content="Lab 1 é¡¹ç›®æ„å»º  ç”±äºæˆ‘å¯¹gitä¸æ˜¯å¾ˆç†Ÿç»ƒï¼Œæ‰€ä»¥æ‹‰å–å’Œåˆå¹¶çš„æ“ä½œæœ‰ç‚¹éº»çƒ¦ã€‚é¦–å…ˆgit clone -b lab1-startercode &lt;url&gt;æ‹‰å–çš„æ˜¯åˆ«äººä»“åº“ lab1 çš„ start code åˆ°æœ¬åœ°ï¼Œç„¶ågit remote rm originåˆ é™¤ä¸è¿œç«¯ä»“åº“çš„è”ç³»ï¼Œgit remote add origin &lt;git@github.com:usrname&#x2F;rep">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/avatar.jpg">
<meta property="article:published_time" content="2024-08-11T00:47:37.184Z">
<meta property="article:modified_time" content="2024-09-14T00:53:46.531Z">
<meta property="article:author" content="è˜‹æœ«é£">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/avatar.jpg"><link rel="shortcut icon" href="../../../../img/crown.png"><link rel="canonical" href="http://example.com/2024/08/11/CS144-Lab1/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="../../../../css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Standford CS144 Lab 1',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-09-14 08:53:46'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="atom.xml" title="Tech_Islet" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="../../../../img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="../../../../archives/"><div class="headline">æ–‡ç« </div><div class="length-num">15</div></a><a href="../../../../tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">0</div></a><a href="../../../../categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">0</div></a></div><hr class="custom-hr"/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://wallpaperaccess.com/full/8045532.png')"><nav id="nav"><span id="blog-info"><a href="../../../../index.html" title="Tech_Islet"><span class="site-name">Tech_Islet</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Standford CS144 Lab 1</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2024-08-11T00:47:37.184Z" title="å‘è¡¨äº 2024-08-11 08:47:37">2024-08-11</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2024-09-14T00:53:46.531Z" title="æ›´æ–°äº 2024-09-14 08:53:46">2024-09-14</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Standford CS144 Lab 1"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="lab-1-é¡¹ç›®æ„å»º"><a class="markdownIt-Anchor" href="#lab-1-é¡¹ç›®æ„å»º"></a> Lab 1 é¡¹ç›®æ„å»º</h1>
<p><img src="/2024/08/11/CS144-Lab1/startcode.png" alt="startcode.png"><br>
ç”±äºæˆ‘å¯¹<code>git</code>ä¸æ˜¯å¾ˆç†Ÿç»ƒï¼Œæ‰€ä»¥æ‹‰å–å’Œåˆå¹¶çš„æ“ä½œæœ‰ç‚¹éº»çƒ¦ã€‚é¦–å…ˆ<code>git clone -b lab1-startercode &lt;url&gt;</code>æ‹‰å–çš„æ˜¯åˆ«äººä»“åº“ lab1 çš„ start code åˆ°æœ¬åœ°ï¼Œç„¶å<code>git remote rm origin</code>åˆ é™¤ä¸è¿œç«¯ä»“åº“çš„è”ç³»ï¼Œ<code>git remote add origin &lt;git@github.com:usrname/reposname.git&gt;</code>å’Œè‡ªå·±çš„è¿œç«¯ä»“åº“è”ç³»ï¼ˆ<code>&lt;url&gt;</code>çš„è¯<code>GitHub</code>å·²ç»ä¸æ”¯æŒç”¨æˆ·å¯†ç ç™»å½•äº†ï¼Œæœ€å¥½æ˜¯ç”¨<code>SSH</code>ï¼‰ï¼Œå†<code>push</code>åˆ°è¿œç«¯çš„ä¸€ä¸ªæ–°çš„åˆ†æ”¯ä¸Šï¼ˆæˆ‘çš„åˆ†æ”¯åç§°å«<code>lab1</code>ï¼Œç”¨æ¥ä¿å­˜<code>starter code</code>ï¼‰ã€‚æ¥ç€å°±å’Œæ–‡æ¡£ç»™å‡ºçš„æ­¥éª¤ä¸€æ ·ï¼Œ<code>git fetch</code>åŒæ­¥ä¸€ä¸‹ï¼Œç„¶å<code>git merge origin/lab1</code>ï¼Œä¸å‡ºæ‰€æ–™ä¼šå‘ç”Ÿ<code>merge conflict</code>ã€‚<br>
<img src="/2024/08/11/CS144-Lab1/merge.png" alt="merge.png"><br>
ä¸ç”¨æ…Œï¼Œè¿›åˆ°æ–‡ä»¶å¤¹é‡Œä¸€ç‚¹ç‚¹ merge å°±å¥½ã€‚å†²çªè§£å†³å®Œå<code>git add</code> -&gt;<code>git commit</code>-&gt;<code>git push</code>è¡Œäº‘æµæ°´æ¨åˆ° lab0 çš„åˆ†æ”¯ä¸Šï¼Œæœ€å<code>make</code>ç¼–è¯‘å®Œæˆäº†é¡¹ç›®åˆå§‹åŒ–ã€‚</p>
<h1 id="å®éªŒè¦æ±‚"><a class="markdownIt-Anchor" href="#å®éªŒè¦æ±‚"></a> å®éªŒè¦æ±‚</h1>
<h2 id="æ€»è§ˆ-lab-01234-æ¡†æ¶"><a class="markdownIt-Anchor" href="#æ€»è§ˆ-lab-01234-æ¡†æ¶"></a> æ€»è§ˆ Lab 0/1/2/3/4 æ¡†æ¶</h2>
<p><img src="/2024/08/11/CS144-Lab1/%E6%A1%86%E6%9E%B6.png" alt="æ¡†æ¶.png"></p>
<blockquote>
<p>Figure: The arrangement of modules and dataflow in your TCP implementation. <strong>The ByteStream was Lab 0.</strong> The job of TCP is to convey two ByteStreams (one in each direction) over an unreliable datagram network, so that bytes written to the socket on one side of the connection emerge as bytes that can be read at the peer, and vice versa. <strong>Lab 1 is the StreamReassembler, and in Labs 2, 3, and 4 youâ€™ll implement the TCPReceiver, TCPSender, and then the TCPConnection to tie it all together.</strong></p>
</blockquote>
<p>æ•´ä¸ªå®éªŒå°† TCP æ¨¡å—åŒ–åˆ†å¼€æ¥å®Œæˆï¼Œæœ€åæŠŠå‡ ä¸ªç»„ä»¶åˆåœ¨ä¸€èµ·å®ç° TCPã€‚åœ¨<code>Lab 0</code>çš„<code>webget</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨äº†ç³»ç»Ÿæä¾›çš„ TCPï¼ˆ<code>&quot;using Linuxâ€™s built-in implementation of the Transmission Control Protocol (TCP)&quot;</code>ï¼‰ï¼Œåœ¨æ­¤ä¹‹ä¸Šæˆ‘ä»¬ä½¿ç”¨ TCP æä¾›çš„æœåŠ¡å®ç°äº†å®¢æˆ·ç«¯<code>socket</code>ã€‚è€Œæ¥ä¸‹æ¥æˆ‘ä»¬æŠŠè§†è§’ç§»åŠ¨åˆ° socket é¢å‘è¿è¾“å±‚çš„ä¸€ç«¯ï¼Œå°†å®ç°è‡ªå·±çš„ TCPï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬è¦<strong>åœ¨ä¸€ä¸ªä¸å¯é çš„ç½‘ç»œï¼ˆç½‘ç»œå±‚ï¼‰ä¸Šå®ç°å¯¹ä¸Šå±‚ï¼ˆåº”ç”¨å±‚ï¼‰æä¾›çš„æœåŠ¡</strong>ã€‚</p>
<blockquote>
<p><strong>Over the next four weeks, youâ€™ll implement TCP, to provide the byte-stream abstraction between a pair of computers separated by an unreliable datagram network.</strong></p>
</blockquote>
<h2 id="lab-1-è¦æ±‚"><a class="markdownIt-Anchor" href="#lab-1-è¦æ±‚"></a> Lab 1 è¦æ±‚</h2>
<blockquote>
<p>In Lab 1, youâ€™ll implement a <strong>stream reassembler</strong>â€”a module that stitches small pieces of the byte stream (known as substrings, or segments) back into a contiguous stream of bytes in the correct sequence.</p>
</blockquote>
<p>åœ¨<code>Lab 1</code>ä¸­ï¼Œæˆ‘ä»¬å°†è¦å®Œæˆä¸€ä¸ªæµé‡ç»„å™¨ï¼ˆstream reassemblerï¼‰ï¼Œåœ¨ä¸Šé¢çš„æ¡†æ¶ä¸­å¯ä»¥çœ‹åˆ°å®ƒæ˜¯æˆ‘ä»¬å®ç°<code>TCPReceiver</code>ç»„ä»¶çš„ä¸€ä¸ªå­ç»„ä»¶ï¼Œå…¶åŠŸèƒ½ä¹Ÿå¾ˆæ¸…æ™°ï¼šç”±äºç½‘ç»œä¸å¯é ï¼Œæ‰€ä»¥æ•°æ®æŠ¥å¯èƒ½ä¸¢å¤±ã€å¤±åºæˆ–è€…é‡å¤ï¼ˆæ²¡æœ‰è€ƒè™‘å‡ºé”™ï¼‰ï¼Œæµé‡ç»„å™¨è¯»å–è¿™äº›æ•°æ®æŠ¥å¹¶å°†å®ƒä»¬è½¬æ¢ä¸ºå¯é çš„å­—èŠ‚æµï¼Œå†™å…¥<code>BytesSream</code>ä¸­ã€‚</p>
<h1 id="ç¼–å†™ä»£ç å’Œè°ƒè¯•"><a class="markdownIt-Anchor" href="#ç¼–å†™ä»£ç å’Œè°ƒè¯•"></a> ç¼–å†™ä»£ç å’Œè°ƒè¯•</h1>
<h2 id="å…³äºå®ç°çš„æ€è€ƒ"><a class="markdownIt-Anchor" href="#å…³äºå®ç°çš„æ€è€ƒ"></a> å…³äºå®ç°çš„æ€è€ƒ</h2>
<p>æˆ‘ä»¬è¦å®ç°çš„ï¼Œå…¶å®å°±æ˜¯åœ¨<code>capacity</code>å¤§å°çš„å†…å­˜é™åˆ¶ä¸‹ï¼Œå®Œæˆå­å­—ç¬¦ä¸²çš„åˆå¹¶ï¼è¯´èµ·åˆå¹¶ï¼Œæˆ‘è®°èµ·ä¹‹å‰åœ¨ Leetcode ä¸Šåšè¿‡ä¸€é“<a target="_blank" rel="noopener" href="https://leetcode.cn/problems/SsGoHC/description/">æ•°ç»„åˆå¹¶çš„é—®é¢˜</a>ï¼Œè¿˜æƒ³åˆ°äº† B æ ‘çš„åˆå¹¶ã€‚</p>
<p>å¯¹äºå®¹å™¨çš„é€‰æ‹©ï¼ˆæˆ‘çš„ C++ä¸ç†Ÿç»ƒï¼Œå¾ˆå¤šå®¹å™¨éƒ½ä¸äº†è§£ï¼‰ï¼Œæˆ‘çœ‹ç½‘ä¸Šæœ‰äº›æœ‹å‹ä½¿ç”¨<code>std::vertor</code>ï¼Œä¹Ÿæœ‰é€‰<code>std::set</code>æ¨¡æ‹Ÿç¼“å†²åŒºçš„ï¼Œè¿˜æœ‰é€‰<code>std::map</code>çš„ã€‚æˆ‘é€‰æ‹©çš„æ˜¯<code>std::map</code>ï¼Œ<code>key</code>æ˜¯<code>size_t</code>ç±»å‹è€Œ<code>value</code>æ˜¯<code>string</code>ç±»å¯¹è±¡ï¼Œå¥½åƒè¿ç”¨ä¸åˆ°å‰é¢æ— ç«¯è”æƒ³çš„ä¸œè¥¿ã€‚ä¸å¾—ä¸è¯´<code>map</code>è¿›è¡Œåˆå¹¶å®åœ¨æ˜¯å¤ªç¹çäº†ï¼Œè¦è€ƒè™‘åˆ°å¾ˆå¤šç§æƒ…å†µï¼ˆé‡å¤ä»£ç ä¹Ÿå¾ˆå¤šï¼‰ï¼Œæš´åŠ›æ¨¡æ‹Ÿäº† 200 å¤šè¡Œ ğŸ˜­ï¼ŒåŒ…å«äº†æ•´æ•´ 5 å±‚æ¡ä»¶åˆ¤æ–­ ğŸ˜­ã€‚ç”±äºå¤ªå¤šç§æƒ…å†µéœ€è¦åˆ†æäº†ï¼Œéš¾å…ä¼šæœ‰ç–æ¼ï¼Œæœ€åæˆ‘å®åœ¨ä¸æƒ³ä¿®è¡¥äº†ï¼Œäºæ˜¯ä¾¿æ”¾å¼ƒäº†<code>map</code>ã€‚åé¢æˆ‘ä¸€æƒ³ï¼Œç›´æ¥æ¯ä¸€ä¸ªåºå·å¯¹åº”ä¸€ä¸ªå­—èŠ‚ä¸ä¹…ç®€å•å¾ˆå¤šäº†å—ï¼ï¼</p>
<p>çœ‹åˆ°å…¶ä»–äººä¸‰å››åè¡Œå°±è§£å†³äº†ï¼Œè€Œæˆ‘ä¸¤ç™¾è¡Œå†™äº†ä¸€æ•´å¤©ï¼Œæ„Ÿè§‰è‡ªå·±çœŸçš„å¾ˆèœã€‚å½“ç„¶ä¼˜åŒ–æ˜¯åè¯äº†ï¼Œè‡³å°‘å…ˆæŠŠå®éªŒå®Œæˆäº†ï¼Œå†å»è€ƒè™‘å‡å°‘é‡å¤ä»£ç ï¼ˆå‡½æ•°å°è£…ï¼‰ï¼Œæé«˜æ€§èƒ½ï¼ˆé€‰æ‹©å…¶ä»–æ•°æ•°æ®ç»“æ„ï¼‰ç­‰é—®é¢˜ã€‚</p>
<h2 id="æµç¨‹æ¨¡æ‹Ÿ"><a class="markdownIt-Anchor" href="#æµç¨‹æ¨¡æ‹Ÿ"></a> æµç¨‹æ¨¡æ‹Ÿ</h2>
<ul>
<li>è¾“å…¥çš„å­å­—ç¬¦ä¸²å¯ä»¥ç”±ä¸‰ä¸ªé‡å”¯ä¸€æè¿°ï¼š<strong>å­—ç¬¦ä¸²å€¼ã€é•¿åº¦ã€ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·</strong>ã€‚æˆ‘ä»¬åœ¨<code>push_substring</code>ä¸­å¯ä»¥çœ‹åˆ°è¾“å…¥ä¸­è¿˜æœ‰ä¸€ä¸ªé‡<code>eof</code>ï¼Œè¿™ä»£è¡¨çš„æ˜¯<code>substring</code>æµæ˜¯å¦åˆ°è¾¾æœ«å°¾ï¼Œæ‰€ä»¥æˆ‘å¹¶æ²¡æœ‰æŠŠå®ƒç®—ä½œå­å­—ç¬¦ä¸²çš„å±æ€§ä¹‹ä¸€ã€‚</li>
<li>æˆ‘ä»¬è¢«é™åˆ¶ä½¿ç”¨<code>capacity</code>å¤§å°çš„å†…å­˜ï¼Œè¿™ä¸ªå†…å­˜æ˜¯ç”±<code>ByteStream</code>ä¸­çš„ç¼“å†²åŒºï¼ˆä¸‹å›¾ç»¿è‰²éƒ¨åˆ†ï¼‰å’Œ<code>SreamReassembler</code>è‡ªèº«çš„ç¼“å†²åŒºï¼ˆä¸‹å›¾çº¢è‰²éƒ¨åˆ†ï¼‰æ‰€<strong>å…±æœ‰çš„</strong>ã€‚å‰è€…ç”¨äºç¼“å†²å·²ç»é‡ç»„å¥½ä½†å¹¶æœªè¢«åº”ç”¨ç¨‹åºè¯»å–çš„æœ‰åºå¯é å­—ç¬¦ä¸²ï¼Œåè€…ç”¨äºç¼“å­˜æ¥æ”¶åˆ°çš„ä¹±åºå­å­—ç¬¦ä¸²ã€‚<img src="/2024/08/11/CS144-Lab1/capacity.png" alt="capacity.png"></li>
<li><strong>æ³¨æ„ï¼š</strong> æ¥å—åˆ°çš„å­å­—ç¬¦ä¸²å¯èƒ½æ˜¯ä¹±åºã€é‡å¤çš„ï¼Œå°±å¦‚åŒå®é™…ç½‘ç»œä¸­ä¸€æ ·ã€‚è¿™é‡Œçš„æœ‰ä¸€äº›æ³¨æ„ç‚¹æ˜¯å®éªŒæ–‡æ¡£é‡Œæ²¡è¯´æ¸…æ¥šçš„ï¼ˆä¸è¶³ä¹‹å¤„ï¼‰ï¼Œæˆ‘é€šè¿‡è°ƒè¯•æµ‹è¯•ç”¨ä¾‹æ‰å‘ç°çš„ï¼ˆé¢å‘æµ‹è¯•ç”¨ä¾‹ç¼–ç¨‹ ğŸ˜µï¼‰ã€‚
<ul>
<li>å­å­—ç¬¦ä¸²å¯èƒ½å®Œå…¨ä½äºè“è‰²/ç»¿è‰²ï¼ˆå·²è¯»å‡º/å·²å†™å…¥<code>ByteStream</code>ï¼‰éƒ¨åˆ†ï¼Œéœ€è¦ç›´æ¥ä¸¢æ‰</li>
<li>å­å­—ç¬¦ä¸²å¯èƒ½æœ‰ä¸€éƒ¨åˆ†æ˜¯å·²ç»å†™å…¥<code>ByteStream</code>ï¼ˆç»¿è‰²ï¼‰ï¼Œè€Œæœ‰ä¸€éƒ¨åˆ†æ˜¯æœªå†™å…¥çš„ï¼ˆçº¢è‰²ï¼‰ï¼Œéœ€è¦è¿›è¡Œè£å‰ª</li>
<li>å­å­—ç¬¦ä¸²å¯èƒ½å…¨æ˜¯çº¢è‰²éƒ¨åˆ†ï¼Œå®éªŒè¦æ±‚æˆ‘ä»¬åœ¨çº¢è‰²éƒ¨åˆ†ä¸èƒ½æœ‰é‡å çš„å­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯è¯´è¯»å…¥çš„æ—¶å€™æˆ‘ä»¬è¦å¯¹å®ƒè¿›è¡Œåˆå¹¶æ‰èƒ½ç¼“å­˜åˆ°<code>Reassembler</code>ä¸­</li>
<li>å­—ç¬¦ä¸²å¯èƒ½æ˜¯åŒ…å«<code>EOF</code>ä¿¡æ¯çš„ç©ºå­—ç¬¦ä¸²ï¼Œå…³é”®åœ¨<code>EOF</code>çš„å¤„ç†</li>
</ul>
</li>
</ul>
<h2 id="è°ƒè¯•"><a class="markdownIt-Anchor" href="#è°ƒè¯•"></a> è°ƒè¯•</h2>
<h3 id="std-mapsize_t-std-stringç‰ˆ"><a class="markdownIt-Anchor" href="#std-mapsize_t-std-stringç‰ˆ"></a> std: :map&lt;size_t, std: :string&gt;ç‰ˆ</h3>
<p>æ ¹æ®ä»¥ä¸Šçš„æ€è·¯ï¼Œæˆ‘å°è¯•ç”¨ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹çœ‹çœ‹å…·ä½“çš„è¿‡ç¨‹ï¼Œä¸‹é¢æ˜¯<code>fsm_stream_reassembler_single.cc</code>ä¸­çš„ä¸€ä¸ªä¾‹å­ã€‚</p>
<blockquote>
<p>åˆå§‹åŒ–<code>capacity</code>å¤§å°ä¸º 8ï¼Œç„¶åè¾“å…¥åºå·ä¸º 0 çš„&quot;abc&quot;å­å­—ç¬¦ä¸²ï¼Œç›´æ¥ç¼“å­˜åˆ°<code>ByteStream</code>ä¸­ï¼Œä¸‹ä¸€ä¸ªæœŸå¾…æ¥å—åˆ°çš„åºå·åº”è¯¥æ˜¯ 3ã€‚ä¹‹åå†è¾“å…¥åºå·ä¸º 6 çš„&quot;ghX&quot;å­—ç¬¦ä¸²ï¼Œä¸”æœ€åä¸€ä¸ªå­—èŠ‚æ˜¯å­—ç¬¦ä¸²æµçš„æœ«å°¾ï¼Œç”±äºå‰é¢è¿˜æœ‰å­—èŠ‚æœªæ¥æ”¶åˆ°ï¼Œå› æ­¤å…ˆç¼“å­˜åˆ°<code>Reassembler</code>çš„ç¼“å†²åŒºä¸­ã€‚ä¹‹ååˆè¾“å…¥äº†åºå·ä¸º 2 çš„å­—ç¬¦ä¸²&quot;cdefg&quot;ï¼Œç”±äºåºå· 2 çš„å­—èŠ‚å·²ç»å†™å…¥<code>ByteSream</code>äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šå¯¹å­—ç¬¦ä¸²è¿›è¡Œè£å‰ªï¼Œç›¸å½“äºè¾“å…¥çš„æ˜¯åºå·ä¸º 3 çš„å­—ç¬¦ä¸²&quot;defg&quot;ã€‚æ³¨æ„åˆ°æ­¤æ—¶ç¼“å†²åŒºä¸­æœ‰å·²é‡ç»„çš„å­—ç¬¦ä¸²&quot;abc&quot;+æœªé‡ç»„çš„å­—ç¬¦ä¸²&quot;ghX&quot;ï¼Œå‰©ä½™å†…å­˜å¤§å°ä¸º 2ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åªèƒ½ç¼“å­˜åºå·ä¸º 3 çš„&quot;de&quot;å­—ç¬¦ä¸²ï¼Œæ°å¥½æ˜¯æœŸæœ›çš„ä¸‹ä¸€ä¸ªå­—èŠ‚åºå·ï¼Œç«‹å³å†™å…¥åˆ°<code>ByteStream</code>ä¸­ã€‚æ­¤æ—¶<code>ByteStream</code>ç¼“å†²åŒºåº”è¯¥æœ‰å­—ç¬¦ä¸²&quot;abcde&quot;ï¼Œè€Œ<code>Reassembler</code>ç¼“å­˜åŒºä¸­åº”è¯¥æœ‰åºå·ä¸º 6 çš„å­å­—ç¬¦&quot;ghX&quot;ï¼Œç»“æœä¸æµ‹è¯•ç”¨ä¾‹ä¸ç¬¦åˆï¼</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	ReassemblerTestHarness test&#123;<span class="number">8</span>&#125;;</span><br><span class="line">Â  Â  Â  Â  Â  Â </span><br><span class="line">Â  Â  test.<span class="built_in">execute</span>(SubmitSegment&#123;<span class="string">&quot;abc&quot;</span>, <span class="number">0</span>&#125;);</span><br><span class="line">Â  Â  test.<span class="built_in">execute</span>(<span class="built_in">BytesAssembled</span>(<span class="number">3</span>));</span><br><span class="line">Â  Â  test.<span class="built_in">execute</span>(NotAtEof&#123;&#125;);</span><br><span class="line"></span><br><span class="line">Â  Â  test.<span class="built_in">execute</span>(SubmitSegment&#123;<span class="string">&quot;ghX&quot;</span>, <span class="number">6</span>&#125;.<span class="built_in">with_eof</span>(<span class="literal">true</span>));</span><br><span class="line">Â  Â  test.<span class="built_in">execute</span>(<span class="built_in">BytesAssembled</span>(<span class="number">3</span>));</span><br><span class="line">Â  Â  test.<span class="built_in">execute</span>(NotAtEof&#123;&#125;);</span><br><span class="line">Â  Â  Â  Â  Â  Â </span><br><span class="line">Â  Â  test.<span class="built_in">execute</span>(SubmitSegment&#123;<span class="string">&quot;cdefg&quot;</span>, <span class="number">2</span>&#125;);</span><br><span class="line">Â  Â  test.<span class="built_in">execute</span>(<span class="built_in">BytesAssembled</span>(<span class="number">8</span>));</span><br><span class="line">Â  Â  test.<span class="built_in">execute</span>(BytesAvailable&#123;<span class="string">&quot;abcdefgh&quot;</span>&#125;);</span><br><span class="line">Â  Â  test.<span class="built_in">execute</span>(NotAtEof&#123;&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»æµ‹è¯•ç”¨ä¾‹æ¥çœ‹ï¼Œæ˜¯å…ˆåˆå¹¶äº†&quot;defg&quot;å’Œ&quot;ghX&quot;ï¼Œæ­¤æ—¶ç¼“å­˜åŒºæœ‰åºå·ä¸º 3 çš„å­—ç¬¦ä¸²&quot;defghX&quot;ï¼Œè€Œåœ¨å†™å…¥<code>ByteStream</code>æ—¶ç”±äºå†…å­˜é™åˆ¶ä¸¢å¼ƒäº†æœ€åä¸€ä¸ªå­—èŠ‚ï¼æ–‡æ¡£ä¸­å†™é“ &quot;Receive a substring and write any newly contiguous bytes into the stream. The StreamReassembler will stay within the memory limits of the <code>capacity</code>. Bytes that would exceed the capacity are silently discarded.&quot;æ˜¯è¯´è¶…è¿‡ capacity å¤§å°çš„å­—èŠ‚ä¼šä¸¢å¼ƒï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºåº”è¯¥æ˜¯åœ¨è¾“å…¥å­—ç¬¦ä¸²æ—¶å°±æŠŠå®ƒä¸¢å¼ƒçš„ï¼ˆé”™è¯¯ï¼‰ã€‚</p>
<p>å…¶å®è¿™ç§æƒ³æ³•å’Œå…·ä½“å®è·µä¸­çš„ç½‘ç»œåŒ…æ”¶å‘æ˜¯ç›¸è¿èƒŒçš„ã€‚åœ¨å¤„ç†ç½‘ç»œåŒ…å¤±åºæ—¶ï¼Œå¦‚æœç¼“å†²åŒºç©ºé—´æœ‰é™å¹¶ä¸”å¿…é¡»ä¸¢å¼ƒæŸäº›æ•°æ®åŒ…ï¼Œéœ€è¦è€ƒè™‘çš„ä¸»è¦åŸåˆ™æ˜¯<strong>å°½é‡ä¿æŒæ•°æ®çš„æœ‰åºæ€§å¹¶å‡å°‘é‡å¤çš„ä¼ è¾“è¯·æ±‚</strong>ï¼Œæ‰€ä»¥ä¼šä¼˜å…ˆä¸¢å¼ƒåºå·è¾ƒå¤§çš„å·²ç¼“å­˜çš„æ•°æ®ï¼Œè¿™ç§ç­–ç•¥çš„ä¸»è¦æ€æƒ³æ˜¯<strong>ä¿æŒæ•°æ®æµçš„è¿ç»­æ€§</strong>ï¼Œä¼˜å…ˆç¡®ä¿æœŸæœ›çš„ä¸‹ä¸€ä¸ªåºå·çš„æ•°æ®åŒ…èƒ½å¤Ÿå°½å¿«è¢«æ¥æ”¶åˆ°ã€‚<br>
<img src="/2024/08/11/CS144-Lab1/%E9%9D%A2%E5%90%91%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B.png" alt="é¢å‘æµ‹è¯•ç”¨ä¾‹.png"><br>
åœ¨åç»­è°ƒè¯•è¿‡ç¨‹æˆ‘å‘ç°æˆ‘è¿˜æœ‰ä¸€äº›æƒ…å†µæ²¡æœ‰è€ƒè™‘åˆ°ï¼Œè€Œè¿™ç§æ˜ å°„å…³ç³»æ¨¡æ‹Ÿèµ·æ¥è¿‡äºç¹çï¼Œå› æ­¤æ”¾å¼ƒäº†æ˜ å°„åˆ°<code>std::string</code>ï¼Œå°è¯•æ˜ å°„åˆ°<code>std::char</code>é‡æ–°å†™ä¸€éã€‚</p>
<h3 id="std-mapsize_t-charç‰ˆ"><a class="markdownIt-Anchor" href="#std-mapsize_t-charç‰ˆ"></a> std: :map&lt;size_t, char&gt;ç‰ˆ</h3>
<h4 id="å®ç°è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#å®ç°è¿‡ç¨‹"></a> å®ç°è¿‡ç¨‹</h4>
<ol>
<li>å…ˆå¯¹æ¥æ”¶çš„å­å­—ç¬¦ä¸²è¿›è¡Œè£å‰ªï¼Œç„¶åç¼“å­˜åˆ°<code>StreamReassembler</code>ä¸­</li>
<li>åœ¨<code>capaity</code>ç¼“å†²åŒºå¤§å°çš„é™åˆ¶ä¸‹ï¼Œé‡‡å–ä¼˜å…ˆä¸¢å¼ƒåºå·è¾ƒå¤§çš„å·²ç¼“å­˜å­—ç¬¦ä¸²çš„ç­–ç•¥ï¼Œå¯¹<code>StreamReassembler</code>ç¼“å†²åŒºè¿›è¡Œé™åˆ¶</li>
<li>åˆ¤æ–­æ˜¯å¦å°†<code>StreamReassembler</code>ä¸­çš„é‡ç»„å­—ç¬¦ä¸²å†™å…¥<code>ByteSream</code>ä¸­</li>
</ol>
<h4 id="æµ‹è¯•ç»“æœ"><a class="markdownIt-Anchor" href="#æµ‹è¯•ç»“æœ"></a> æµ‹è¯•ç»“æœ</h4>
<p><img src="/2024/08/11/CS144-Lab1/%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.png" alt="æµ‹è¯•ç»“æœ.png"><br>
æµ‹è¯•ç”¨ä¾‹<code>t_strm_reassem_many</code>å’Œ<code>t_strm_reassem_win</code>ç”¨æ—¶è¿‡é•¿</p>
<h2 id="å®ç°ä»£ç "><a class="markdownIt-Anchor" href="#å®ç°ä»£ç "></a> å®ç°ä»£ç </h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* stream_reassembler.hh */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StreamReassembler</span> &#123;</span><br><span class="line"></span><br><span class="line">Â  <span class="keyword">private</span>:</span><br><span class="line">Â  Â  <span class="comment">// Your code here -- add private members as necessary.</span></span><br><span class="line">Â  Â  std::map&lt;<span class="type">size_t</span>, <span class="type">char</span>&gt; buffer; Â <span class="comment">// ç”¨äºæ”¾ç½®æœªé‡ç»„çš„å­å­—ç¬¦ä¸²</span></span><br><span class="line">Â  Â  <span class="type">size_t</span> sequence_num = <span class="number">0</span>; Â  Â  Â  Â <span class="comment">// æ ‡è®°åº”è¯¥æ¥æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªåºåˆ—å·</span></span><br><span class="line">Â  Â  <span class="type">size_t</span> buffer_size = <span class="number">0</span>; Â  Â  Â  Â  <span class="comment">// è¡¨ç¤ºbufferä¸­ç¼“å­˜çš„æ‰€æœ‰å­å­—ç¬¦ä¸²çš„æ€»å­—èŠ‚æ•°ï¼ˆæ— é‡å¤ï¼‰</span></span><br><span class="line">Â  Â  <span class="type">size_t</span> ended_seq Â = std::numeric_limits&lt;<span class="type">size_t</span>&gt;::<span class="built_in">max</span>() - <span class="number">2</span>; Â  Â <span class="comment">// æµçš„æœ€åä¸€ä¸ªå­—èŠ‚çš„åºå·</span></span><br><span class="line">Â  Â  <span class="type">bool</span> _eof = <span class="literal">false</span>; Â  <span class="comment">// æµæ˜¯å¦åˆ°è¾¾ç»“å°¾</span></span><br><span class="line">Â  Â  ByteStream _output; Â <span class="comment">//!&lt; The reassembled in-order byte stream</span></span><br><span class="line">Â  Â  <span class="type">size_t</span> _capacity; Â  Â <span class="comment">//!&lt; The maximum number of bytesÂ </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*stream_reassembler.cc*/</span></span><br><span class="line">StreamReassembler::<span class="built_in">StreamReassembler</span>(<span class="type">const</span> <span class="type">size_t</span> capacity) : <span class="built_in">buffer</span>(), _output(capacity), _capacity(capacity)&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">StreamReassembler::push_substring</span><span class="params">(<span class="type">const</span> string &amp;data, <span class="type">const</span> <span class="type">size_t</span> index, <span class="type">const</span> <span class="type">bool</span> eof)</span> </span>&#123;</span><br><span class="line">Â  Â  <span class="type">size_t</span> last_seq = index + data.<span class="built_in">length</span>(); Â  Â <span class="comment">// è¯¥å­å­—ç¬¦ä¸²æœ€åä¸€ä¸ªå­—èŠ‚çš„ä¸‹ä¸€ä¸ªåºåˆ—å·</span></span><br><span class="line">Â  Â  <span class="keyword">if</span>(eof)&#123;</span><br><span class="line">Â  Â  Â  Â  <span class="comment">// å­å­—ç¬¦ä¸²å¤„äºæµçš„æœ«å°¾</span></span><br><span class="line">Â  Â  Â  Â  <span class="keyword">if</span>(data != <span class="string">&quot; &quot;</span>)&#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  ended_seq = last_seq - <span class="number">1</span>;</span><br><span class="line">Â  Â  Â  Â  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  ended_seq = <span class="number">0</span>;</span><br><span class="line">Â  Â  Â  Â  &#125;</span><br><span class="line">Â  Â  &#125;</span><br><span class="line">Â  Â  <span class="keyword">if</span>(!eof &amp;&amp; data == <span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">Â  Â  Â  Â  <span class="keyword">return</span> ;</span><br><span class="line">Â  Â  &#125;</span><br><span class="line">Â  Â  <span class="keyword">if</span>(last_seq &lt;= sequence_num &amp;&amp; data != <span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">Â  Â  Â  Â  <span class="comment">// å­å­—ç¬¦ä¸²å·²ç»é‡ç»„</span></span><br><span class="line">Â  Â  Â  Â  <span class="keyword">return</span> ;</span><br><span class="line">Â  Â  &#125;</span><br><span class="line"></span><br><span class="line">Â  Â  <span class="keyword">if</span>(index &lt; sequence_num)&#123;</span><br><span class="line">Â  Â  Â  Â  <span class="comment">// è¿›è¡Œå­—ç¬¦ä¸²è£å‰ª</span></span><br><span class="line">Â  Â  Â  Â  <span class="built_in">push_substring</span>(data.<span class="built_in">substr</span>(sequence_num - index), sequence_num, eof);</span><br><span class="line">Â  Â  Â  Â  <span class="keyword">return</span> ;</span><br><span class="line">Â  Â  &#125;</span><br><span class="line">Â  Â  <span class="keyword">for</span>(<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; data.<span class="built_in">length</span>(); ++i)&#123;</span><br><span class="line">Â  Â  Â  Â  <span class="comment">// å°†å­å­—ç¬¦ä¸²å…ˆç¼“å­˜åˆ°bufferä¸­</span></span><br><span class="line">Â  Â  Â  Â  buffer.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(index + i, data[i]));</span><br><span class="line">Â  Â  &#125;</span><br><span class="line">Â  Â  buffer_size = <span class="number">0</span>;</span><br><span class="line">Â  Â  <span class="keyword">for</span>(<span class="keyword">auto</span> iter = buffer.<span class="built_in">begin</span>(); iter != buffer.<span class="built_in">end</span>(); iter++)&#123;</span><br><span class="line">Â  Â  Â  Â  <span class="keyword">if</span>(buffer_size &gt;= _capacity - _output.<span class="built_in">buffer_size</span>())&#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  buffer.<span class="built_in">erase</span>(iter, buffer.<span class="built_in">end</span>());</span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="keyword">break</span>;</span><br><span class="line">Â  Â  Â  Â  &#125;</span><br><span class="line">Â  Â  Â  Â  buffer_size++;</span><br><span class="line">Â  Â  &#125;</span><br><span class="line"></span><br><span class="line">Â  Â  <span class="keyword">for</span>(<span class="keyword">auto</span> iter = buffer.<span class="built_in">begin</span>(); iter-&gt;first == sequence_num &amp;&amp; iter != buffer.<span class="built_in">end</span>();)&#123;</span><br><span class="line">Â  Â  Â  Â  <span class="comment">// åˆ¤æ–­æ˜¯å¦å¯ä»¥å†™å…¥é‡ç»„å­—ç¬¦ä¸²</span></span><br><span class="line">Â  Â  Â  Â  _output.<span class="built_in">write</span>(<span class="built_in">string</span>(<span class="number">1</span>, iter-&gt;second));</span><br><span class="line">Â  Â  Â  Â  buffer_size--; Â  Â  Â <span class="comment">// æ›´æ–°bufferå¤§å°</span></span><br><span class="line">Â  Â  Â  Â  sequence_num++; Â  Â  <span class="comment">// æ›´æ–°æœŸæœ›çš„ä¸‹ä¸€ä¸ªåºåˆ—å·</span></span><br><span class="line">Â  Â  Â  Â  iter = buffer.<span class="built_in">erase</span>(iter); <span class="comment">// é‡Šæ”¾å·²è¯»å…¥çš„å­—ç¬¦ä¸²å†…å­˜</span></span><br><span class="line">Â  Â  &#125;</span><br><span class="line"></span><br><span class="line">Â  Â  <span class="keyword">if</span>((sequence_num<span class="number">-1</span>) == ended_seq)&#123;</span><br><span class="line">Â  Â  Â  Â  _eof = <span class="literal">true</span>;</span><br><span class="line">Â  Â  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(eof &amp;&amp; data == <span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">Â  Â  Â  Â  _eof = eof;</span><br><span class="line">Â  Â  &#125;</span><br><span class="line"></span><br><span class="line">Â  Â  <span class="keyword">if</span>(_eof &amp;&amp; buffer.<span class="built_in">empty</span>())&#123;</span><br><span class="line">Â  Â  Â  Â  _output.<span class="built_in">end_input</span>();</span><br><span class="line">Â  Â  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">StreamReassembler::unassembled_bytes</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> buffer_size; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">StreamReassembler::empty</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">if</span>(buffer_size == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>; <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>; &#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“åæ€"><a class="markdownIt-Anchor" href="#æ€»ç»“åæ€"></a> æ€»ç»“åæ€</h1>
<ol>
<li>å¯¹ C++çš„ STL ä¸ç†Ÿæ‚‰ï¼Œå› æ­¤åœ¨ç¼“å†²åŒºçš„æ¨¡æ‹Ÿä¸­èµ°äº†å¼¯è·¯</li>
<li>å¯¹äºåŸºæœ¬ç®—æ³•ä¸ç†Ÿç»ƒï¼Œéœ€è¦å¤šåˆ·é¢˜æå‡æ€ç»´</li>
<li>ä¿æŒåˆå¿ƒï¼Œä½†ä¸è¦é’»ç‰›è§’å°–ï¼Œå­¦ä¼šçŸ¥éš¾è€Œé€€ï¼Œå­¦ä¹ ä»–äººçš„ä»£ç æ˜¯å¦‚ä½•è®¾è®¡æ„å»ºçš„ï¼Œä¹Ÿæ˜¯å­¦ä¹ çš„ä¸€ä¸ªæ–¹æ³•</li>
</ol>
</article><div class="tag_share"><div class="post_share"><div class="social-share" data-image="../../../../img/avatar.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="../../../09/15/CS144-Lab2/" title="Standford CS144 Lab 2"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">Standford CS144 Lab 2</div></div></a></div><div class="next-post pull-right"><a href="../../08/%E9%80%9A%E4%BF%A1%E7%BD%91%E7%BB%9C%E5%8F%91%E5%B1%95/" title="æ‰‹æœºç”µè¯å’Œå¾®ä¿¡è¯­éŸ³â€”â€”ä»ä¸¤ç§å³æ—¶é€šä¿¡æŠ€æœ¯çš„åŒºåˆ«çœ‹é€šä¿¡ç½‘ç»œçš„å‘å±•"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">æ‰‹æœºç”µè¯å’Œå¾®ä¿¡è¯­éŸ³â€”â€”ä»ä¸¤ç§å³æ—¶é€šä¿¡æŠ€æœ¯çš„åŒºåˆ«çœ‹é€šä¿¡ç½‘ç»œçš„å‘å±•</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="../../../../img/avatar.jpg" onerror="this.onerror=null;this.src='../../../../img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">è˜‹æœ«é£</div><div class="author-info__description">éšç¼˜æ›´å„ç§æ‚ä¸ƒæ‚å…«çš„ä¸œè¥¿</div></div><div class="card-info-data site-data is-center"><a href="../../../../archives/"><div class="headline">æ–‡ç« </div><div class="length-num">15</div></a><a href="../../../../tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">0</div></a><a href="../../../../categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">0</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Akane0238" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="../../../../mailto:qweasd28848@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#lab-1-%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA"><span class="toc-number">1.</span> <span class="toc-text"> Lab 1 é¡¹ç›®æ„å»º</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E8%A6%81%E6%B1%82"><span class="toc-number">2.</span> <span class="toc-text"> å®éªŒè¦æ±‚</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E8%A7%88-lab-01234-%E6%A1%86%E6%9E%B6"><span class="toc-number">2.1.</span> <span class="toc-text"> æ€»è§ˆ Lab 0&#x2F;1&#x2F;2&#x2F;3&#x2F;4 æ¡†æ¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lab-1-%E8%A6%81%E6%B1%82"><span class="toc-number">2.2.</span> <span class="toc-text"> Lab 1 è¦æ±‚</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E4%BB%A3%E7%A0%81%E5%92%8C%E8%B0%83%E8%AF%95"><span class="toc-number">3.</span> <span class="toc-text"> ç¼–å†™ä»£ç å’Œè°ƒè¯•</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E5%AE%9E%E7%8E%B0%E7%9A%84%E6%80%9D%E8%80%83"><span class="toc-number">3.1.</span> <span class="toc-text"> å…³äºå®ç°çš„æ€è€ƒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E6%A8%A1%E6%8B%9F"><span class="toc-number">3.2.</span> <span class="toc-text"> æµç¨‹æ¨¡æ‹Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B0%83%E8%AF%95"><span class="toc-number">3.3.</span> <span class="toc-text"> è°ƒè¯•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#std-mapsize_t-std-string%E7%89%88"><span class="toc-number">3.3.1.</span> <span class="toc-text"> std: :map&lt;size_t, std: :string&gt;ç‰ˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#std-mapsize_t-char%E7%89%88"><span class="toc-number">3.3.2.</span> <span class="toc-text"> std: :map&lt;size_t, char&gt;ç‰ˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E8%BF%87%E7%A8%8B"><span class="toc-number">3.3.2.1.</span> <span class="toc-text"> å®ç°è¿‡ç¨‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C"><span class="toc-number">3.3.2.2.</span> <span class="toc-text"> æµ‹è¯•ç»“æœ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="toc-number">3.4.</span> <span class="toc-text"> å®ç°ä»£ç </span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%E5%8F%8D%E6%80%9D"><span class="toc-number">4.</span> <span class="toc-text"> æ€»ç»“åæ€</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="" title="2024-1å­¦ä¹ æ€è€ƒç‚¹æ»´æ±‡æ€»">2024-1å­¦ä¹ æ€è€ƒç‚¹æ»´æ±‡æ€»</a><time datetime="2025-01-15T09:03:31.781Z" title="å‘è¡¨äº 2025-01-15 17:03:31">2025-01-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="../../../../2024/12/12/CS144-Lab3/" title="Standford CS144 Lab 3">Standford CS144 Lab 3</a><time datetime="2024-12-12T13:07:39.704Z" title="å‘è¡¨äº 2024-12-12 21:07:39">2024-12-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="../../../../2024/12/03/Operating-System-Concepts-Ch4/" title="Operating System Concepts: Multithreaded Programming">Operating System Concepts: Multithreaded Programming</a><time datetime="2024-12-03T09:12:32.577Z" title="å‘è¡¨äº 2024-12-03 17:12:32">2024-12-03</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="../../../../2024/11/17/Operating-System-Concepts-Ch3/" title="Operating System Concepts: Process Concept">Operating System Concepts: Process Concept</a><time datetime="2024-11-17T08:13:46.470Z" title="å‘è¡¨äº 2024-11-17 16:13:46">2024-11-17</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="../../../../2024/10/02/Git%E4%BA%8C%E5%91%A8%E7%9B%AE%E5%AD%A6%E4%B9%A0/" title="GitäºŒå‘¨ç›®å­¦ä¹ ">GitäºŒå‘¨ç›®å­¦ä¹ </a><time datetime="2024-10-02T13:17:15.501Z" title="å‘è¡¨äº 2024-10-02 21:17:15">2024-10-02</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="../../../../js/utils.js?v=4.13.0"></script><script src="../../../../js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>